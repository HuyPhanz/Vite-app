(this["webpackJsonpVite-app"]=this["webpackJsonpVite-app"]||[]).push([[0],{114:function(e,t,r){},115:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r(23),n=r.n(c),s=r(5),o=r(39),d=r(75),i=r(76),l=r(3),u="PRODUCTS_LIST_REQUEST",j="PRODUCTS_LIST_SUCCESS",b="PRODUCTS_LIST_FAIL",p="PRODUCT_DETAILS_REQUEST",O="PRODUCT_DETAILS_SUCCESS",h="PRODUCT_DETAILS_FAIL",x="CREATE_PRODUCT_REQUEST",m="CREATE_PRODUCT_SUCCESS",f="CREATE_PRODUCT_FAIL",g="CREATE_PRODUCT_RESET",y="UPDATE_PRODUCT_REQUEST",v="UPDATE_PRODUCT_SUCCESS",C="UPDATE_PRODUCT_FAIL",S="UPDATE_PRODUCT_RESET",E="DELETE_PRODUCT_REQUEST",_="DELETE_PRODUCT_SUCCESS",R="DELETE_PRODUCT_FAIL",A="DELETE_PRODUCT_RESET",N="CHECK_TOKEN_VALID_REQUEST",L="CHECK_TOKEN_VALID_SUCCESS",k="CHECK_TOKEN_VALID_FAIL",w="CARD_CREATE_REQUEST",D="CARD_CREATE_SUCCESS",T="CARD_CREATE_FAIL",I="CARD_CREATE_RESET",U="CHARGE_CARD_REQUEST",P="CHARGE_CARD_SUCCESS",G="CHARGE_CARD_FAIL",V="CHARGE_CARD_RESET",F="SAVED_CARDS_LIST_REQUEST",B="SAVED_CARDS_LIST_SUCCESS",H="SAVED_CARDS_LIST_FAIL",z="DELETE_SAVED_CARD_REQUEST",q="DELETE_SAVED_CARD_SUCCESS",X="DELETE_SAVED_CARD_FAIL",Q="UPDATE_STRIPE_CARD_REQUEST",Y="UPDATE_STRIPE_CARD_SUCCESS",M="UPDATE_STRIPE_CARD_FAIL",J="UPDATE_STRIPE_CARD_RESET",K="USER_LOGIN_REQUEST",W="USER_LOGIN_SUCCESS",Z="USER_LOGIN_FAIL",$="USER_LOGOUT",ee="USER_REGISTER_REQUEST",te="USER_REGISTER_SUCCESS",re="USER_REGISTER_FAIL",ae="USER_DETAILS_REQUEST",ce="USER_DETAILS_SUCCESS",ne="USER_DETAILS_FAIL",se="UPDATE_USER_DETAILS_REQUEST",oe="UPDATE_USER_DETAILS_SUCCESS",de="UPDATE_USER_DETAILS_FAIL",ie="UPDATE_USER_DETAILS_RESET",le="DELETE_USER_ACCOUNT_REQUEST",ue="DELETE_USER_ACCOUNT_SUCCESS",je="DELETE_USER_ACCOUNT_FAIL",be="DELETE_USER_ACCOUNT_RESET",pe="GET_USER_ALL_ADDRESSES_REQUEST",Oe="GET_USER_ALL_ADDRESSES_SUCCESS",he="GET_USER_ALL_ADDRESSES_FAIL",xe="GET_SINGLE_ADDRESS_REQUEST",me="GET_SINGLE_ADDRESS_SUCCESS",fe="GET_SINGLE_ADDRESS_FAIL",ge="GET_SINGLE_ADDRESS_RESET",ye="CREATE_USER_ADDRESS_REQUEST",ve="CREATE_USER_ADDRESS_SUCCESS",Ce="CREATE_USER_ADDRESS_FAIL",Se="CREATE_USER_ADDRESS_RESET",Ee="UPDATE_USER_ADDRESS_REQUEST",_e="UPDATE_USER_ADDRESS_SUCCESS",Re="UPDATE_USER_ADDRESS_FAIL",Ae="UPDATE_USER_ADDRESS_RESET",Ne="DELETE_USER_ADDRESS_REQUEST",Le="DELETE_USER_ADDRESS_SUCCESS",ke="DELETE_USER_ADDRESS_FAIL",we="DELETE_USER_ADDRESS_RESET",De="GET_ALL_ORDERS_REQUEST",Te="GET_ALL_ORDERS_SUCCESS",Ie="GET_ALL_ORDERS_FAIL",Ue="CHANGE_DELIVERY_STATUS_REQUEST",Pe="CHANGE_DELIVERY_STATUS_SUCCESS",Ge="CHANGE_DELIVERY_STATUS_FAIL",Ve="CHANGE_DELIVERY_STATUS_RESET",Fe=Object(o.combineReducers)({productsListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,products:[],error:""});case j:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,products:t.payload,error:""});case b:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:t.payload});default:return e}},productDetailsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,product:{},error:""});case O:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,product:t.payload,error:""});case h:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:t.payload});default:return e}},createProductReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,product:{},success:!1,error:""});case m:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,product:t.payload,error:""});case f:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,product:{},error:t.payload});case g:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,product:{},error:""});default:return e}},updateProductReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,product:{},success:!1,error:""});case v:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,product:t.payload,error:""});case C:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,product:{},error:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,product:{},error:""});default:return e}},deleteProductReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case _:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case R:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case A:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}},createCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,cardData:{},success:!1,error:""});case D:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,cardData:t.payload,error:""});case T:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,cardData:{},success:!1,error:t.payload});case I:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,cardData:{},error:""});default:return e}},chargeCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case P:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case G:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case V:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}},savedCardsListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stripeCards:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case B:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,stripeCards:t.payload,error:""});case H:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});default:return e}},updateStripeCardtReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{loading:!0,success:!1,stripeCard:{},error:""};case Y:return{loading:!1,success:!0,stripeCard:t.payload,error:""};case M:return{loading:!1,success:!1,stripeCard:{},error:t.payload};case J:return{loading:!1,success:!1,stripeCard:{},error:""};default:return e}},deleteSavedCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,error:""});case q:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,data:t.payload,error:""});case X:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:t.payload});default:return e}},userLoginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case W:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,userInfo:t.payload});case Z:return{loading:!1,error:t.payload};case $:return{};default:return e}},userRegisterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case te:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,userInfo:t.payload});case re:return{loading:!1,error:t.payload};case $:return{};default:return e}},getSingleAddressReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,address:{},success:!1,error:""});case me:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,address:t.payload,success:!0,error:""});case fe:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,address:{},success:!1,error:t.payload});case ge:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,address:{},success:!1,error:""});default:return e}},getAllAddressesOfUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,addresses:[],success:!1,error:""});case Oe:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,addresses:t.payload,success:!0,error:""});case he:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,addresses:[],success:!1,error:t.payload});default:return e}},createUserAddressReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,address:{},success:!1,error:""});case ve:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,address:t.payload,success:!0,error:""});case Ce:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,address:{},error:t.payload});case Se:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,address:{},error:""});default:return e}},updateUserAddressReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case _e:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case Re:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case Ae:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}},deleteUserAddressReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case Le:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case ke:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case we:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}},getAllOrdersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,orders:[],error:""});case Te:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,orders:t.payload,error:""});case Ie:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,orders:[],error:t.payload});default:return e}},changeDeliveryStatusReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case Pe:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case Ge:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case Ve:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}},checkTokenValidationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,valid:!1,error:""});case L:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,valid:!0,error:""});case k:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,valid:!1,error:t.payload});case"CHECK_TOKEN_VALID_RESET":return Object(l.a)(Object(l.a)({},e),{},{loading:!1,valid:!1,error:""});default:return e}},userDetailsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,user:{},error:""});case ce:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,user:t.payload,error:""});case ne:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,user:{},error:t.payload});default:return e}},userDetailsUpdateReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,user:{},success:!1,error:""});case oe:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,user:t.payload,error:""});case de:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,user:{},error:t.payload});case ie:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,user:{},error:""});default:return e}},deleteUserAccountReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,success:!1,error:""});case ue:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!0,error:""});case je:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:t.payload});case be:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,success:!1,error:""});default:return e}}}),Be=Fe,He=[i.a],ze={userLoginReducer:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},qe=Object(o.createStore)(Be,ze,Object(d.composeWithDevTools)(o.applyMiddleware.apply(void 0,He))),Xe=r(11),Qe=r(17),Ye=r(10),Me=r(15),Je=r(16),Ke=r.n(Je),We=function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r){var a,c;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:p}),t.next=4,Ke.a.get("/api/product/".concat(e,"/"));case 4:a=t.sent,c=a.data,r({type:O,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:h,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Ze=r(120),$e=r(0);var et=function(e){var t=e.variant,r=e.children;return Object($e.jsx)(Ze.a,{variant:t,children:r})},tt=r(121),rt=r(122),at=r(77),ct=r(132);var nt=function(e){var t=e.product;return Object($e.jsx)("div",{children:Object($e.jsx)(ct.a,{className:"mb-4 rounded",children:Object($e.jsxs)(ct.a.Body,{children:[Object($e.jsx)(Xe.Link,{to:"/product/".concat(t.id),children:Object($e.jsx)(ct.a.Img,{variant:"top",src:t.image,height:"162"})}),Object($e.jsx)(Xe.Link,{to:"/product/".concat(t.id),children:Object($e.jsx)(ct.a.Title,{as:"div",children:Object($e.jsx)("strong",{children:t.name})})}),Object($e.jsxs)(ct.a.Text,{as:"h3",children:["\u20b9 ",t.price]})]})})})};var st=function(){var e=Object(Qe.k)().location.search,t=Object(s.b)(),r=Object(s.c)((function(e){return e.productsListReducer})),c=r.loading,n=r.error,o=r.products;return Object(a.useEffect)((function(){t(function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t){var r,a;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:u}),e.next=4,Ke.a.get("/api/products/");case 4:r=e.sent,a=r.data,t({type:j,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:b,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),t({type:g})}),[t]),Object($e.jsxs)("div",{children:[n&&Object($e.jsx)(et,{variant:"danger",children:n}),c&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Products"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{children:0===o.filter((function(t){return t.name.toLowerCase().includes(""!==e?e.split("=")[1]:"")})).length?Object($e.jsx)("div",{children:c?"":Object($e.jsx)(et,{variant:"info",children:"Nothing to show"})}):o.filter((function(t){return t.name.toLowerCase().includes(""!==e?e.split("=")[1]:"")})).map((function(e,t){return Object($e.jsx)(at.a,{sm:12,md:6,lg:4,xl:3,children:Object($e.jsx)("div",{className:"mx-2",children:Object($e.jsx)(nt,{product:e})})},e.id)}))})})]})},ot=r(6),dt=r(128),it=r(78),lt=r(123);var ut=function(e){var t=e.history,r=e.match,c=Object(s.b)(),n=Object(a.useState)(!1),o=Object(ot.a)(n,2),d=o[0],i=o[1],l=function(){return i(!1)},u=Object(s.c)((function(e){return e.productDetailsReducer})),j=u.loading,b=u.error,p=u.product,O=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,h=Object(s.c)((function(e){return e.deleteProductReducer})).success;Object(a.useEffect)((function(){c(We(r.params.id)),c({type:S}),c({type:g}),c({type:I})}),[c,r]);var x=function(){var e;c((e=r.params.id,function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:E}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.delete("/api/product-delete/".concat(e,"/"),s);case 6:o=t.sent,d=o.data,r({type:_,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:R,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}())),l()};return h&&(alert("Product successfully deleted."),t.push("/"),c({type:A})),Object($e.jsxs)("div",{children:[Object($e.jsx)("div",{children:Object($e.jsxs)(dt.a,{show:d,onHide:l,children:[Object($e.jsx)(dt.a.Header,{closeButton:!0,children:Object($e.jsxs)(dt.a.Title,{children:[Object($e.jsx)("i",{style:{color:"#e6e600"},className:"fas fa-exclamation-triangle"})," ","Delete Confirmation"]})}),Object($e.jsxs)(dt.a.Body,{children:["Are you sure you want to delete this product ",Object($e.jsxs)("em",{children:['"',p.name,'"']}),"?"]}),Object($e.jsxs)(dt.a.Footer,{children:[Object($e.jsx)(it.a,{variant:"danger",onClick:function(){return x()},children:"Confirm Delete"}),Object($e.jsx)(it.a,{variant:"primary",onClick:l,children:"Cancel"})]})]})}),j&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Product Details"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),b?Object($e.jsx)(et,{variant:"danger",children:b}):Object($e.jsx)("div",{children:Object($e.jsx)(lt.a,{children:Object($e.jsxs)(rt.a,{children:[Object($e.jsxs)(at.a,{md:6,children:[Object($e.jsx)(ct.a.Img,{variant:"top",src:p.image,height:"420"}),O&&O.admin?Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("button",{className:"btn mt-2 btn-danger btn-sm button-focus-css",style:{width:"100%"},onClick:function(){return i(!0)},children:"Delete Product"}),Object($e.jsx)("button",{className:"ml-2 mt-2 btn btn-primary btn-sm button-focus-css",onClick:function(){return t.push("/product-update/".concat(p.id,"/"))},style:{width:"100%"},children:"Edit Product"})]}):""]}),Object($e.jsxs)(at.a,{sm:!0,children:[Object($e.jsx)("b",{children:p.name}),Object($e.jsx)("hr",{}),Object($e.jsx)("span",{className:"justify-description-css",children:Object($e.jsx)("p",{children:p.description})}),Object($e.jsxs)("span",{style:{display:"flex",justifyContent:"center",border:"1px solid",borderColor:"#C6ACE7",padding:"2px"},children:["Price:",Object($e.jsxs)("span",{className:"text-success ml-2",children:["\u20b9 ",p.price]})]})]}),Object($e.jsxs)(at.a,{sm:!0,children:[Object($e.jsx)("b",{children:"Buy"}),Object($e.jsx)("hr",{}),p.stock?Object($e.jsx)(Xe.Link,{to:"".concat(p.id,"/checkout/"),children:Object($e.jsx)("button",{className:"btn btn-primary",children:Object($e.jsx)("span",{children:"Pay with Stripe"})})}):Object($e.jsx)(et,{variant:"danger",children:"Out Of Stock!"})]})]})})})]})},jt=r(124),bt=r(129),pt=function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:w}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token),"Card-Number":e.cardNumber}},t.next=6,Ke.a.post("/payments/create-card/",{email:e.email,number:e.cardNumber,exp_month:e.expMonth,exp_year:e.expYear,cvc:e.cvc,save_card:e.saveCard},s);case 6:o=t.sent,d=o.data,r({type:D,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:T,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},Ot=function(){return function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t,r){var a,c,n,s,o;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:F}),a=r(),c=a.userLoginReducer.userInfo,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Ke.a.get("/account/stripe-cards/",n);case 6:s=e.sent,o=s.data,t({type:B,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:H,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()};var ht=function(e){e.userId;var t=e.deleteCardNumber,r=e.runCardDeleteHandler,a=e.toggleRunCardDeleteHandler,c=Object(s.b)(),n=function(e){var t;c((t=e,function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:z}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},e.next=6,Ke.a.post("/payments/delete-card/",{card_number:t},s);case 6:o=e.sent,d=o.data,r({type:q,payload:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:X,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}())),a()};return Object($e.jsx)("div",{children:Object($e.jsx)("div",{children:Object($e.jsxs)(dt.a,{show:r,onHide:a,children:[Object($e.jsx)(dt.a.Header,{closeButton:!0,children:Object($e.jsxs)(dt.a.Title,{children:[Object($e.jsx)("i",{style:{color:"#e6e600"},className:"fas fa-exclamation-triangle"})," ","Delete Confirmation"]})}),Object($e.jsxs)(dt.a.Body,{children:[Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Warning!"})," ","deleting your card will delete your stripe account and all its data."]}),'Are you sure you want to delete the card "',t,'"?']}),Object($e.jsxs)(dt.a.Footer,{children:[Object($e.jsx)(it.a,{variant:"danger",onClick:function(){return n(t)},children:"Confirm Delete"}),Object($e.jsx)(it.a,{variant:"primary",onClick:a,children:"Cancel"})]})]})})})},xt=(new Date).getFullYear(),mt=function(e){var t=e.stripeCards,r=e.addressSelected,c=Object(Qe.k)(),n=Object(s.b)(),o=Object(a.useState)(0),d=Object(ot.a)(o,1)[0],i=Object(a.useState)(!1),l=Object(ot.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(!1),p=Object(ot.a)(b,2),O=p[0],h=p[1],x=Object(a.useState)(!1),m=Object(ot.a)(x,2),f=m[0],g=m[1],y=Object(a.useState)(0),v=Object(ot.a)(y,2),C=v[0],S=v[1],E=Object(a.useState)(!1),_=Object(ot.a)(E,2),R=_[0],A=_[1],N=Object(a.useState)(""),L=Object(ot.a)(N,1)[0],k=Object(a.useState)(""),w=Object(ot.a)(k,2),D=w[0],T=w[1],I=Object(a.useState)(""),U=Object(ot.a)(I,2),P=U[0],G=U[1],V=Object(a.useState)(""),F=Object(ot.a)(V,2),B=F[0],H=F[1],z=Object(a.useState)(""),q=Object(ot.a)(z,2),X=q[0],Q=q[1],Y=Object(a.useState)(""),M=Object(ot.a)(Y,2),J=M[0],K=M[1],W=Object(a.useState)(!1),Z=Object(ot.a)(W,2),$=Z[0],ee=Z[1],te=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,re=Object(s.c)((function(e){return e.deleteSavedCardReducer})),ae=re.loading,ce=re.success,ne=re.error;Object(a.useEffect)((function(){te||c.push("/login")}),[c,te,ce]);var se=function(e){if(f&&e.id===C)return Object($e.jsxs)("div",{children:[Object($e.jsx)("button",{onClick:function(){return g(!1)},className:"btn btn-outline-danger btn-sm button-focus-css",style:{float:"right",position:"relative",top:"-40px"},children:"close"}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Exp Month:"})," ",e.exp_month]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Exp Year:"})," ",e.exp_year]})]})};return ce&&(alert("Card successfully deleted."),window.location.reload()),Object($e.jsxs)("div",{children:[Object($e.jsx)("div",{children:Object($e.jsx)($e.Fragment,{children:Object($e.jsx)(ht,{userId:d,deleteCardNumber:L,runCardDeleteHandler:u,toggleRunCardDeleteHandler:function(){j(!u)}})})}),ae&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Deleting card"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),ne&&Object($e.jsx)(et,{variant:"danger",children:ne}),Object($e.jsxs)("div",{className:"card px-4 py-4",children:[Object($e.jsx)("button",{className:R?"btn btn-sm btn-danger mb-3 button-focus-css":"btn btn-sm btn-primary mb-3 button-focus-css",onClick:function(){return A(!R)},children:R?"close":"Enter stripe card"}),R?Object($e.jsxs)(bt.a,{onSubmit:function(e){if(e.preventDefault(),r){var t={email:""===D?te.email:D,cardNumber:P,expMonth:B?Number(B):"",expYear:X?Number(X):"",cvc:J?Number(J):"",saveCard:$};n(pt(t))}else alert("Please select or add your Address to continue")},children:[O?Object($e.jsxs)(bt.a.Group,{children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Card Holder Email Address"})}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"email",pattern:".+@gmail\\.com",value:D,onChange:function(e){return T(e.target.value)},placeholder:"Email address linked with the Card"})]}):Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Default Customer Email: "}),te.email]}),Object($e.jsx)("p",{children:Object($e.jsx)(Xe.Link,{to:"#",onClick:function(){h(!O),T("")},children:O?"Use Your default Email":"Use a different Card"})}),Object($e.jsxs)(bt.a.Group,{className:"mb-3",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Card Number"})}),Object($e.jsx)(bt.a.Control,{type:"text",pattern:"[0-9]+",value:P,onChange:function(e){return G(e.target.value)},placeholder:"Enter Your Card Number",maxLength:"16",required:!0})]}),Object($e.jsxs)(rt.a,{children:[Object($e.jsx)(at.a,{children:Object($e.jsxs)(bt.a.Group,{className:"mb-3",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Exp Month"})}),Object($e.jsxs)("select",{className:"form-control",defaultValue:B,onChange:function(e){return H(e.target.value)},required:!0,children:[Object($e.jsx)("option",{children:"-- --"}),Array.from({length:12},(function(e,t){return Object($e.jsx)("option",{children:t+1},t)}))]})]})}),Object($e.jsx)(at.a,{children:Object($e.jsxs)(bt.a.Group,{className:"mb-3",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Exp Year"})}),Object($e.jsxs)("select",{className:"form-control",defaultValue:X,onChange:function(e){return Q(e.target.value)},required:!0,children:[Object($e.jsx)("option",{children:"-- --"}),Array.from({length:21},(function(e,t){return Object($e.jsx)("option",{children:xt+t},t)}))]})]})}),Object($e.jsx)(at.a,{children:Object($e.jsxs)(bt.a.Group,{className:"mb-3",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"CVC Number"})}),Object($e.jsx)(bt.a.Control,{type:"numbers",onChange:function(e){return K(e.target.value)},placeholder:"123",maxLength:"3",pattern:"[0-9]+",required:!0})]})})]}),Object($e.jsx)(bt.a.Text,{className:"text-muted pb-2",children:Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("input",{hidden:O,type:"checkbox",className:"mt-1",value:!O&&$,onChange:function(){return ee(!$)}}),Object($e.jsx)("span",{hidden:O,className:"ml-1",children:"Save my card for future payments"})]})}),Object($e.jsx)(it.a,{className:"btn-sm button-focus-css",variant:"primary",type:"submit",children:"Submit"})]}):""]}),Object($e.jsxs)("div",{className:"my-4 card px-4 py-4",children:[Object($e.jsx)("h5",{children:"Saved card"}),t.length>0?t.map((function(e){return Object($e.jsxs)("div",{children:[Object($e.jsxs)(ct.a,{style:{border:"1px solid",borderColor:"#C6ACE7"},className:"p-2",children:[Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Card Number:"})," XXXX XXXX XXXX ",e.card_number.slice(12,18)]}),Object($e.jsxs)("div",{children:[se(e),Object($e.jsx)("button",{onClick:function(){g(!0),S(e.id)},className:"btn btn-sm btn-outline-primary button-focus-css",children:"Show Card Details"}),Object($e.jsx)("button",{onClick:function(){return function(e){if(r){var t={email:e.email,cardNumber:e.card_number,expMonth:Number(e.exp_month),expYear:Number(e.exp_year),cvc:Number(e.cvc),saveCard:!1};n(pt(t))}else alert("Please select or add your Address to continue")}(e)},className:"ml-2 btn btn-sm btn-outline-primary button-focus-css",children:"Pay with this Card"})]})]}),Object($e.jsx)("span",{onClick:function(){return c.push("/stripe-card-details/")},children:Object($e.jsx)("i",{title:"edit card",className:"fas fa-edit fa-lg edit-button-css mr-2"})})]},e.id)})):"No saved card."]})]})},ft=function(){return function(e){localStorage.removeItem("userInfo"),e({type:$}),e({type:I})}},gt=function(){return function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t,r){var a,c,n,s,o;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:N}),a=r(),c=a.userLoginReducer.userInfo,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Ke.a.get("/payments/check-token/",n);case 6:s=e.sent,o=s.data,t({type:L,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:k,payload:e.t0.response&&e.t0.response.data.details?e.t0.response.data.details:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()},yt=function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:ae}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.get("/account/user/".concat(e),s);case 6:o=t.sent,d=o.data,r({type:ce,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:ne,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},vt=function(){return function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t,r){var a,c,n,s,o;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:pe}),a=r(),c=a.userLoginReducer.userInfo,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Ke.a.get("/account/all-address-details/",n);case 6:s=e.sent,o=s.data,t({type:Oe,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:he,payload:e.t0.response&&e.t0.response.data.details?e.t0.response.data.details:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()},Ct=function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:xe}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.get("/account/address-details/".concat(e,"/"),s);case 6:o=t.sent,d=o.data,r({type:me,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:fe,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},St=function(){return function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t,r){var a,c,n,s,o;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:De}),a=r(),c=a.userLoginReducer.userInfo,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Ke.a.get("/account/all-orders-list/",n);case 6:s=e.sent,o=s.data,t({type:Te,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Ie,payload:e.t0.response&&e.t0.response.data.details?e.t0.response.data.details:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()},Et=function(e){var t=e.product,r=e.match,c=e.selectedAddressId,n=(e.addressSelected,Object(Qe.k)()),o=Object(s.b)(),d=Object(s.c)((function(e){return e.createCardReducer})).cardData,i=Object(s.c)((function(e){return e.chargeCardReducer})),l=i.success,u=i.error,j=i.loading,b=Object(s.c)((function(e){return e.getSingleAddressReducer})).address;Object(a.useEffect)((function(){o(Ct(c))}),[o,r,c]);return l&&(n.push({pathname:"/payment-status/",state:{detail:t}}),window.location.reload()),Object($e.jsxs)("div",{children:[u?Object($e.jsx)(et,{variant:"danger",children:u}):"",Object($e.jsx)("span",{className:"text-info",children:Object($e.jsx)("h5",{children:"Confirm payment"})}),Object($e.jsxs)("div",{className:"mb-2",children:["Using Card: XXXX XXXX XXXX ",d.card_data.last4]}),Object($e.jsx)(bt.a,{onSubmit:function(e){e.preventDefault();var r="".concat(b.house_no,", near ").concat(b.landmark,", ").concat(b.city,", \n        ").concat(b.state,", ").concat(b.pin_code),a={email:d.email,source:d.id,amount:t.price,name:b.name,card_number:d.card_data.last4,address:r,ordered_item:t.name,paid_status:!0,total_price:t.price,is_delivered:!1,delivered_at:"Not Delivered"};o(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:U}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.post("/payments/charge-customer/",e,s);case 6:o=t.sent,d=o.data,r({type:P,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:G,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}(a))},children:j?Object($e.jsxs)(it.a,{variant:"primary",disabled:!0,style:{width:"100%"},children:[Object($e.jsx)(tt.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Processing Payment..."]}):Object($e.jsxs)(it.a,{variant:"primary",type:"submit",style:{width:"100%"},children:["Pay \u20b9",t.price]})}),Object($e.jsx)(ct.a,{className:"p-2 mt-2 mb-2",style:{border:"1px solid",borderColor:"#C6ACE7"},children:b?Object($e.jsxs)("div",{children:[Object($e.jsx)("span",{className:"text-info",children:Object($e.jsx)("b",{children:Object($e.jsx)("em",{children:"Will be delievered at this address"})})}),Object($e.jsx)("p",{}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Name: "}),b?b.name:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Phone Number: "}),b?b.phone_number:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"House Number: "}),b?b.house_no:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Landmark: "}),b?b.landmark:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"City: "}),b?b.city:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"State: "}),b?b.state:""]}),Object($e.jsxs)("p",{children:[Object($e.jsx)("b",{children:"Pin Code/Zip Code: "}),b?b.pin_code:""]})]}):""}),Object($e.jsx)(Xe.Link,{to:"#",onClick:function(){return window.location.reload()},children:"Select a different card to pay"})]})};var _t=function(e){var t=e.handleAddressId,r=Object(Qe.k)(),c=Object(s.b)(),n=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,o=Object(s.c)((function(e){return e.getAllAddressesOfUserReducer})).addresses;return Object(a.useEffect)((function(){n?c(vt()):r.push("/login")}),[c,r,n]),Object($e.jsx)("div",{children:o?o.map((function(e,r){return Object($e.jsx)("div",{children:Object($e.jsxs)(ct.a,{className:"p-2 mb-2",style:{border:"1px solid",borderColor:"#C6ACE7"},children:[Object($e.jsx)("input",{type:"radio",name:"addressId",value:0,onClick:function(){return r=e.id,void t(r);var r}}),Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Name: "}),e.name]}),Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Address: "}),e.house_no,", ",e.landmark,", ",e.city,",",e.state,", ",e.pin_code]})]},e.id)},r)})):"empty"})},Rt=function(e){var t=e.match,r=Object(Qe.k)(),c=Object(s.b)(),n=Object(a.useState)(!1),o=Object(ot.a)(n,2),d=o[0],i=o[1],l=Object(a.useState)(0),u=Object(ot.a)(l,2),j=u[0],b=u[1],p=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,O=Object(s.c)((function(e){return e.productDetailsReducer})),h=O.loading,x=O.error,m=O.product,f=Object(s.c)((function(e){return e.createCardReducer})),g=f.error,y=f.success,v=f.loading,C=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,S=Object(s.c)((function(e){return e.savedCardsListReducer})).stripeCards;return Object(a.useEffect)((function(){C?(c(gt()),c(We(t.params.id)),c(Ot()),c({type:V})):r.push("/login")}),[c,t,r,y,C]),C&&"Request failed with status code 401"===p&&(alert("Session expired, please login again."),c(ft()),r.push("/login"),window.location.reload()),Object($e.jsxs)("div",{children:[g?Object($e.jsx)(et,{variant:"danger",children:g}):"",h&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Checkout Info"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),!h&&v?Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Checking your card"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}):"",x?Object($e.jsx)(et,{variant:"danger",children:x}):Object($e.jsx)(lt.a,{children:Object($e.jsxs)(rt.a,{children:[Object($e.jsxs)(at.a,{xs:6,children:[Object($e.jsx)("h3",{children:"Checkout Summary"}),Object($e.jsx)(ct.a,{className:"mb-4",children:Object($e.jsx)(ct.a.Body,{children:Object($e.jsx)(lt.a,{children:Object($e.jsxs)(rt.a,{children:[Object($e.jsx)(at.a,{children:Object($e.jsx)(jt.a,{src:m.image,alt:"image",height:"180"})}),Object($e.jsxs)(at.a,{children:[Object($e.jsx)("h5",{className:"card-title text-capitalize",children:m.name}),Object($e.jsxs)("span",{className:"card-text text-success",children:["\u20b9 ",m.price]})]})]})})})}),Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h3",{children:"Billing Address"}),Object($e.jsx)(Xe.Link,{className:"ml-2 mt-2",to:"/all-addresses/",children:"Edit/Add Address"})]}),Object($e.jsx)(_t,{handleAddressId:function(e){e&&i(!0),b(e)}})]}),Object($e.jsxs)(at.a,{xs:6,children:[Object($e.jsx)("h3",{children:"Payments Section"}),y?Object($e.jsx)(Et,{selectedAddressId:j,addressSelected:d,product:m}):Object($e.jsx)(mt,{addressSelected:d,stripeCards:S})]})]})})]})},At=r(130),Nt=r(131),Lt=r(127),kt=r(32);var wt=function(){var e=Object(Qe.k)(),t=Object(a.useState)(""),r=Object(ot.a)(t,2),c=r[0],n=r[1];return Object($e.jsx)("div",{children:Object($e.jsx)("form",{onSubmit:function(t){t.preventDefault(),c&&e.push("/?searchTerm=".concat(c))},children:Object($e.jsxs)("span",{style:{display:"flex"},className:"",children:[Object($e.jsx)("input",{type:"text",value:c,placeholder:"search products",className:"form-control",onChange:function(e){return n(e.target.value)}}),Object($e.jsx)("button",{type:"submit",className:"btn btn-primary ml-2 button-focus-css",children:Object($e.jsx)("i",{className:"fas fa-search"})})]})})})};var Dt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(s.c)((function(e){return e.userLoginReducer})).userInfo;return Object($e.jsx)("header",{children:Object($e.jsx)(At.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object($e.jsxs)(lt.a,{children:[Object($e.jsx)(kt.LinkContainer,{to:"/",children:Object($e.jsx)(At.a.Brand,{children:Object($e.jsx)("i",{className:"mb-2 fas fa-home",children:" Home"})})}),Object($e.jsx)(At.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object($e.jsxs)(At.a.Collapse,{id:"basic-navbar-nav",children:[Object($e.jsxs)(Nt.a,{className:"mr-auto",children:[Object($e.jsx)(kt.LinkContainer,{to:"/",children:Object($e.jsx)(Nt.a.Link,{children:"All Products"})}),r&&r.admin?Object($e.jsx)(kt.LinkContainer,{to:"/new-product/",children:Object($e.jsx)(Nt.a.Link,{children:"Add Product"})}):"",Object($e.jsx)("span",{className:"",children:Object($e.jsx)(wt,{})})]}),r?Object($e.jsx)("div",{children:Object($e.jsxs)(Lt.a,{className:"navbar-nav text-capitalize",title:r.username,id:"username",children:[Object($e.jsx)(kt.LinkContainer,{to:"/account",children:Object($e.jsx)(Lt.a.Item,{children:"Account Settings"})}),Object($e.jsx)(kt.LinkContainer,{to:"/all-addresses/",children:Object($e.jsx)(Lt.a.Item,{children:"Address Settings"})}),Object($e.jsx)(kt.LinkContainer,{to:"/stripe-card-details/",children:Object($e.jsx)(Lt.a.Item,{children:"Card Settings"})}),Object($e.jsx)(kt.LinkContainer,{to:"/all-orders/",children:Object($e.jsx)(Lt.a.Item,{children:"All Orders"})}),Object($e.jsx)(Lt.a.Item,{onClick:function(){t(ft()),e.push("/login"),window.location.reload()},children:"Logout"})]})}):Object($e.jsx)(kt.LinkContainer,{to:"/login",children:Object($e.jsxs)(Nt.a.Link,{children:[Object($e.jsx)("i",{className:"fas fa-user"})," Login"]})})]})]})})})},Tt=function(){var e=Object(Qe.l)();return function(){try{var t=e.state.detail;return Object($e.jsxs)("div",{children:[Object($e.jsx)("h3",{className:"text-success",children:"Payment was Successfull"}),Object($e.jsxs)(ct.a,{className:"p-3",children:["Successfully bought",Object($e.jsx)("br",{}),Object($e.jsxs)("span",{className:"mb-2",style:{display:"flex"},children:[t.name,", \u20b9",t.price," ",Object($e.jsx)("i",{className:"text-primary ml-1 mt-1 fas fa-check-circle"})]}),Object($e.jsx)(Xe.Link,{to:"/all-orders/",children:"Go to orders page"})]})]})}catch(r){return Object($e.jsx)(et,{variant:"info",children:"Payment status not available."})}}()};var It=function(e){var t=e.history,r=Object(a.useState)(""),c=Object(ot.a)(r,2),n=c[0],o=c[1],d=Object(a.useState)(""),i=Object(ot.a)(d,2),l=i[0],u=i[1],j=Object(s.b)(),b=Object(s.c)((function(e){return e.userLoginReducer})),p=b.error,O=b.userInfo;return Object(a.useEffect)((function(){O&&t.push("/")}),[t,O]),Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{className:"justify-content-md-center",children:Object($e.jsxs)(at.a,{xs:12,md:6,children:[Object($e.jsx)("h1",{children:"Sign In"}),p&&Object($e.jsx)(et,{variant:"danger",children:p}),Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),j(function(e,t){return function(){var r=Object(Me.a)(Object(Ye.a)().mark((function r(a){var c,n,s;return Object(Ye.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:K}),c={headers:{"Content-type":"application/json"}},r.next=5,Ke.a.post("/account/login/",{username:e,password:t},c);case 5:n=r.sent,s=n.data,a({type:W,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:Z,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(n,l))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"username",children:[Object($e.jsx)(bt.a.Label,{children:"Username"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"enter username",value:n,onChange:function(e){return o(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"password",children:[Object($e.jsx)(bt.a.Label,{children:"Password"}),Object($e.jsx)(bt.a.Control,{type:"password",placeholder:"enter your password",value:l,onChange:function(e){return u(e.target.value)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object($e.jsx)(rt.a,{className:"py-3",children:Object($e.jsxs)(at.a,{children:["Do not have an account?",Object($e.jsx)(Xe.Link,{to:"/register",children:" Register"})]})})]})})})};var Ut=function(e){var t=e.history,r=(e.variant,Object(a.useState)("")),c=Object(ot.a)(r,2),n=c[0],o=c[1],d=Object(a.useState)(""),i=Object(ot.a)(d,2),l=i[0],u=i[1],j=Object(a.useState)(""),b=Object(ot.a)(j,2),p=b[0],O=b[1],h=Object(a.useState)(""),x=Object(ot.a)(h,2),m=x[0],f=x[1],g=Object(a.useState)(""),y=Object(ot.a)(g,2),v=y[0],C=y[1],S=Object(s.b)(),E=Object(s.c)((function(e){return e.userRegisterReducer})),_=E.error,R=E.userInfo;return Object(a.useEffect)((function(){R&&t.push("/")}),[t,R]),Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{className:"justify-content-md-center",children:Object($e.jsxs)(at.a,{xs:12,md:6,children:[Object($e.jsx)("h1",{children:"Sign Up"}),v&&Object($e.jsx)(et,{variant:"danger",children:v}),_&&Object($e.jsx)(et,{variant:"danger",children:_}),Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),p!==m?C("Passwords do not match!"):S(function(e,t,r){return function(){var a=Object(Me.a)(Object(Ye.a)().mark((function a(c){var n,s,o;return Object(Ye.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:ee}),n={headers:{"Content-type":"application/json"}},a.next=5,Ke.a.post("/account/register/",{username:e,email:t,password:r},n);case 5:s=a.sent,o=s.data,c({type:te,payload:o}),c({type:W,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),c({type:re,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(n,l,p))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:"Username"}),Object($e.jsx)(bt.a.Control,{required:!0,type:"text",placeholder:"enter your username",value:n,onChange:function(e){return o(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"email",children:[Object($e.jsx)(bt.a.Label,{children:"Email Address"}),Object($e.jsx)(bt.a.Control,{required:!0,type:"email",placeholder:"enter your email",value:l,onChange:function(e){return u(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"password",children:[Object($e.jsx)(bt.a.Label,{children:"Password"}),Object($e.jsx)(bt.a.Control,{required:!0,type:"password",placeholder:"enter your password",value:p,onChange:function(e){return O(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"passwordConfirm",children:[Object($e.jsx)(bt.a.Label,{children:"Confirm Password"}),Object($e.jsx)(bt.a.Control,{required:!0,type:"password",placeholder:"confirm your password",value:m,onChange:function(e){return f(e.target.value)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"primary",children:"Sign Up"})]}),Object($e.jsx)(rt.a,{className:"py-3",children:Object($e.jsxs)(at.a,{children:["Already have an account?",Object($e.jsx)(Xe.Link,{to:"/login",children:" Login"})]})})]})})})},Pt=function(){var e=Object(Qe.k)(),t=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,r=Object(s.b)(),c=Object(a.useState)(""),n=Object(ot.a)(c,2),o=n[0],d=n[1],i=Object(a.useState)(""),l=Object(ot.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(""),p=Object(ot.a)(b,2),O=p[0],h=p[1],x=Object(a.useState)(""),m=Object(ot.a)(x,2),f=m[0],g=m[1],y=Object(a.useState)(""),v=Object(ot.a)(y,2),C=v[0],S=v[1],E=Object(a.useState)(""),_=Object(ot.a)(E,2),R=_[0],A=_[1],N=Object(a.useState)(""),L=Object(ot.a)(N,2),k=L[0],w=L[1],D=Object(a.useState)(""),T=Object(ot.a)(D,2),I=T[0],U=T[1],P=Object(a.useState)(""),G=Object(ot.a)(P,2),V=G[0],F=G[1],B=Object(a.useState)(""),H=Object(ot.a)(B,2),z=H[0],q=H[1],X=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,K=Object(s.c)((function(e){return e.savedCardsListReducer})),W=K.stripeCards,Z=K.loading,$=Object(s.c)((function(e){return e.updateStripeCardtReducer})).success;Object(a.useEffect)((function(){X?(r(gt()),r(Ot())):e.push("/login")}),[r,e,X,$]),X&&"Request failed with status code 401"===t&&(alert("Session expired, please login again."),r(ft()),e.push("/login"),window.location.reload());var ee=function(e){var t;(e.preventDefault(),V&&z)&&r((t={card_number:o,customer_id:V,card_id:z,exp_month:O,exp_year:f,name_on_card:u,address_city:C,address_country:R,address_state:k,address_zip:I},function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:Q}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},e.next=6,Ke.a.post("/payments/update-card/",t,s);case 6:o=e.sent,d=o.data,r({type:Y,payload:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:M,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()))};return $&&(alert("Card Successfully Updated"),e.push("/stripe-card-details"),r({type:J})),Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{className:"justify-content-md-center",children:Object($e.jsxs)(at.a,{xs:12,md:6,children:[Object($e.jsx)("span",{className:"d-flex justify-content-center",style:{display:"flex",marginBottom:"15px",color:"#008080"},children:Object($e.jsx)("em",{children:"Update Card Details"})}),Z&&Object($e.jsx)(tt.a,{animation:"border"}),W.map((function(t,r){return Object($e.jsx)("div",{children:Object($e.jsx)(ct.a,{className:"p-4 mb-4",style:{border:"1px solid",borderColor:"#C6ACE7"},children:Object($e.jsxs)(bt.a,{onSubmit:ee,children:[Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:"Name on Card"}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"text",defaultValue:t.name_on_card,placeholder:"full name",onChange:function(e){return j(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"month",children:[Object($e.jsx)(bt.a.Label,{children:"Exp Month"}),Object($e.jsx)(bt.a.Control,{type:"text",pattern:"[0-9]+",maxLength:"2",defaultValue:t.exp_month,placeholder:"exp month",onChange:function(e){return h(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"year",children:[Object($e.jsx)(bt.a.Label,{children:"Exp Year"}),Object($e.jsx)(bt.a.Control,{type:"text",pattern:"[0-9]+",defaultValue:t.exp_year,placeholder:"exp year",maxLength:"4",onChange:function(e){return g(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"city",children:[Object($e.jsx)(bt.a.Label,{children:"Address City"}),Object($e.jsx)(bt.a.Control,{type:"text",defaultValue:t.address_city,placeholder:"address city",onChange:function(e){return S(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"country",children:[Object($e.jsx)(bt.a.Label,{children:"Address Country"}),Object($e.jsx)(bt.a.Control,{type:"text",defaultValue:t.address_country,placeholder:"address country",onChange:function(e){return A(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"state",children:[Object($e.jsx)(bt.a.Label,{children:"Address State"}),Object($e.jsx)(bt.a.Control,{type:"text",defaultValue:t.address_state,placeholder:"address state",onChange:function(e){return w(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"zip",children:[Object($e.jsx)(bt.a.Label,{children:"Address Zip"}),Object($e.jsx)(bt.a.Control,{type:"text",defaultValue:t.address_zip,placeholder:"address zip",pattern:"[0-9]+",maxLength:"6",onChange:function(e){return U(e.target.value)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"success",onClick:function(){return e=t.customer_id,r=t.card_id,a=t.card_number,F(e),q(r),void d(a);var e,r,a},style:{width:"100%"},className:"btn-sm button-focus-css",children:"Save Changes"}),Object($e.jsx)(it.a,{type:"submit",variant:"primary",onClick:function(){return e.push("/stripe-card-details/")},style:{width:"100%"},className:"btn-sm mt-2 button-focus-css",children:"Cancel"})]})})},r)}))]})})})},Gt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(a.useState)(0),c=Object(ot.a)(r,2),n=c[0],o=c[1],d=Object(a.useState)(!1),i=Object(ot.a)(d,2),l=i[0],u=i[1],j=Object(a.useState)(""),b=Object(ot.a)(j,2),p=b[0],O=b[1],h=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,x=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,m=Object(s.c)((function(e){return e.savedCardsListReducer})),f=m.stripeCards,g=m.loading,y=Object(s.c)((function(e){return e.deleteSavedCardReducer})).success;return Object(a.useEffect)((function(){h?(t(gt()),t(Ot())):e.push("/login")}),[t,e,h]),h&&"Request failed with status code 401"===x&&(alert("Session expired, please login again."),t(ft()),e.push("/login"),window.location.reload()),y&&(alert("Card successfully deleted."),window.location.reload()),Object($e.jsxs)("div",{children:[g&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Card Information"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),Object($e.jsx)("div",{children:Object($e.jsx)($e.Fragment,{children:Object($e.jsx)(ht,{userId:n,deleteCardNumber:p,runCardDeleteHandler:l,toggleRunCardDeleteHandler:function(){u(!l)}})})}),f.length>0?f.map((function(e,t){return Object($e.jsxs)("div",{children:[Object($e.jsxs)(lt.a,{children:[Object($e.jsxs)(rt.a,{className:"mr-6 mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Name on Card:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.name_on_card?Object($e.jsx)("span",{children:e.name_on_card}):"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Exp Month:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.exp_month?e.exp_month:"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Exp Year:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.exp_year?e.exp_year:"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mr-6 mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Address City:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.address_city?e.address_city:"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Address Country:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.address_country?e.address_country:"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Address State:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.address_state?e.address_state:"Not Set"})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Address Zip:"}),Object($e.jsx)(at.a,{className:"p-3",children:e.address_zip?e.address_zip:"Not Set"})]})]}),Object($e.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object($e.jsx)(Xe.Link,{to:"/stripe-card-update/",children:"Update Card details"}),Object($e.jsx)("span",{className:"ml-1 text-primary",children:"| "}),Object($e.jsx)("span",{className:"ml-1"}),Object($e.jsx)(Xe.Link,{to:"#",onClick:function(){O(e.card_number),o(e.user),u(!l)},children:"Delete Card"})]})]},t)})):Object($e.jsx)("div",{children:Object($e.jsx)(et,{variant:"info",children:"Card details not available."})})]})};var Vt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,c=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,n=Object(s.c)((function(e){return e.userDetailsReducer})),o=n.user,d=n.loading;Object(a.useEffect)((function(){if(c)try{t(gt()),t(yt(c.id))}catch(r){e.push("/")}else e.push("/login")}),[e,c,t]);var i=function(){t(ft())};return c&&"Request failed with status code 401"===r&&(alert("Session expired, please login again."),t(ft()),e.push("/login"),window.location.reload()),function(){try{return Object($e.jsxs)("div",{children:[d&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting User Information"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),Object($e.jsxs)(lt.a,{children:[Object($e.jsxs)(rt.a,{className:"mr-6 mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Name:"}),Object($e.jsx)(at.a,{className:"p-3",children:o.username})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Email:"}),Object($e.jsx)(at.a,{className:"p-3",children:o.email})]}),Object($e.jsxs)(rt.a,{className:"mb-2 border border-dark",children:[Object($e.jsx)(at.a,{xs:2,className:"p-3 bg-info text-white",children:"Admin Privileges:"}),Object($e.jsx)(at.a,{className:"p-3",children:o.admin?"Yes":"No"})]})]}),Object($e.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object($e.jsx)(Xe.Link,{to:"/account/update",children:"Update Account details"}),Object($e.jsx)("span",{className:"ml-1 text-primary",children:"| "}),Object($e.jsx)("span",{className:"ml-1"}),Object($e.jsx)(Xe.Link,{to:"/account/delete/",children:"Delete Account"})]})]})}catch(e){return Object($e.jsxs)(et,{variant:"danger",children:["Something went wrong, go back to ",Object($e.jsx)(Xe.Link,{onClick:i,to:"/login",children:" Login"})," page."]})}}()};var Ft=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,c=Object(a.useState)(""),n=Object(ot.a)(c,2),o=n[0],d=n[1],i=Object(a.useState)(""),l=Object(ot.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(""),p=Object(ot.a)(b,2),O=p[0],h=p[1],x=Object(a.useState)(""),m=Object(ot.a)(x,2),f=m[0],g=m[1],y=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,v=Object(s.c)((function(e){return e.userDetailsReducer})),C=v.user,S=v.loading,E=Object(s.c)((function(e){return e.userDetailsUpdateReducer})).success;Object(a.useEffect)((function(){y||e.push("/login"),t(gt()),t(yt(y.id))}),[t,e,y]),y&&"Request failed with status code 401"===r&&(alert("Session expired, please login again."),t(ft()),e.push("/login"),window.location.reload());var _=function(e){e.preventDefault();var r=""===o?C.username:o,a=""===u?C.email:u;O!==f?alert("Passwords do not match"):t(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:se}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.put("/account/user_update/".concat(n.id,"/"),{username:e.username,email:e.email,password:e.password},s);case 6:o=t.sent,d=o.data,r({type:oe,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:de,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}({username:r,email:a,password:O}))},R=function(){e.push("/login"),t(ft())};return E&&(alert("Account successfully updated."),t({type:ie}),e.push("/account/"),t(yt(y.id))),function(){try{return Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{className:"justify-content-md-center",children:Object($e.jsxs)(at.a,{xs:12,md:6,children:[Object($e.jsx)("span",{className:"d-flex justify-content-center",style:{display:"flex",marginBottom:"15px",color:"#008080"},children:Object($e.jsx)("em",{children:"Update User Details"})}),S&&Object($e.jsx)(tt.a,{animation:"border"}),Object($e.jsxs)(bt.a,{onSubmit:_,children:[Object($e.jsxs)(bt.a.Group,{controlId:"username",children:[Object($e.jsx)(bt.a.Label,{children:"Username"}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"text",defaultValue:C.username,placeholder:"username",onChange:function(e){return d(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"email",children:[Object($e.jsx)(bt.a.Label,{children:"Email Address"}),Object($e.jsx)(bt.a.Control,{type:"email",placeholder:"enter email",defaultValue:C.email,onChange:function(e){return j(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"password",children:[Object($e.jsx)(bt.a.Label,{children:"Reset-Password"}),Object($e.jsx)(bt.a.Control,{type:"password",placeholder:"enter new password",onChange:function(e){return h(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"confirmPassword",children:[Object($e.jsx)(bt.a.Label,{children:"Confirm Password"}),Object($e.jsx)(bt.a.Control,{type:"password",placeholder:"confirm new password",onChange:function(e){return g(e.target.value)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"success",className:"btn-sm",children:"Save Changes"}),Object($e.jsx)(Xe.Link,{to:"/account",children:Object($e.jsx)("button",{className:"btn btn-primary btn-sm ml-2",type:"button",children:"Cancel"})})]})]})})})}catch(e){return Object($e.jsxs)(et,{variant:"danger",children:["Something went wrong, go back to ",Object($e.jsx)(Xe.Link,{onClick:R,to:"/login",children:" Login"})," page."]})}}()};var Bt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(a.useState)(""),c=Object(ot.a)(r,2),n=c[0],o=c[1],d=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,i=Object(s.c)((function(e){return e.deleteUserAccountReducer})),l=i.success,u=i.loading,j=i.error;return l&&(alert("Account successfully deleted."),t({type:be}),t(ft()),e.push("/login"),window.location.reload()),Object($e.jsx)("div",{children:Object($e.jsx)(rt.a,{className:"justify-content-md-center",children:Object($e.jsxs)(at.a,{xs:12,md:6,children:[Object($e.jsx)("h3",{children:"Confirm your password to delete your account."}),u&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Please wait"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),j&&Object($e.jsx)(et,{variant:"danger",children:"Incorrect Password!"}),Object($e.jsx)("div",{className:"mt-4",children:Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault();var r={id:d.id,password:n};t(gt()),t(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:le}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.post("/account/user_delete/".concat(e.id,"/"),{password:e.password},s);case 6:o=t.sent,d=o.data,r({type:ue,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:je,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}(r))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"password",children:[Object($e.jsx)(bt.a.Label,{children:"Password"}),Object($e.jsx)(bt.a.Control,{required:!0,type:"password",placeholder:"enter your password",value:n,onChange:function(e){return o(e.target.value)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"danger",children:"Confirm Delete"})]})})]})})})},Ht=r(125),zt=function(e){var t=e.toggleCreateAddress,r=Object(s.b)(),c=Object(a.useState)(""),n=Object(ot.a)(c,2),o=n[0],d=n[1],i=Object(a.useState)(""),l=Object(ot.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(""),p=Object(ot.a)(b,2),O=p[0],h=p[1],x=Object(a.useState)(""),m=Object(ot.a)(x,2),f=m[0],g=m[1],y=Object(a.useState)(""),v=Object(ot.a)(y,2),C=v[0],S=v[1],E=Object(a.useState)(""),_=Object(ot.a)(E,2),R=_[0],A=_[1],N=Object(a.useState)(""),L=Object(ot.a)(N,2),k=L[0],w=L[1],D=Object(s.c)((function(e){return e.createUserAddressReducer})),T=D.success,I=D.error;return T&&(alert("Address successfully created."),t(),r({type:Se}),r(vt())),Object($e.jsxs)("div",{children:[Object($e.jsx)("p",{className:"text-center text-info",children:Object($e.jsx)("em",{children:"New Address"})}),I?Object($e.jsx)(et,{variant:"danger",children:I}):"",Object($e.jsx)(ct.a,{className:"mx-auto mb-4",style:{width:"50%",border:"1px solid",borderColor:"#C6ACE7"},children:Object($e.jsx)(ct.a.Body,{children:Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),r(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:ye}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.post("/account/create-address/",e,s);case 6:o=t.sent,d=o.data,r({type:ve,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:Ce,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}({name:o,phone_number:u,pin_code:O,house_no:f,landmark:C,city:R,state:k}))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:"Name"}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"text",placeholder:"enter your name",value:o,onChange:function(e){return d(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"phoneNumber",children:[Object($e.jsx)(bt.a.Label,{children:"Phone Number"}),Object($e.jsxs)(Ht.a,{children:[Object($e.jsx)(Ht.a.Text,{children:"+91"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"phone number",pattern:"[0-9]+",maxLength:"10",value:u,onChange:function(e){return j(e.target.value)}})]})]}),Object($e.jsxs)(bt.a.Group,{controlId:"pinCode",children:[Object($e.jsx)(bt.a.Label,{children:"Pin Code"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"pin code",value:O,pattern:"[0-9]+",maxLength:"6",onChange:function(e){return h(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"houseNumber",children:[Object($e.jsx)(bt.a.Label,{children:"House No./Address"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"house number",value:f,onChange:function(e){return g(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"landmark",children:[Object($e.jsx)(bt.a.Label,{children:"Landmark"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"landmark",value:C,onChange:function(e){return S(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"city",children:[Object($e.jsx)(bt.a.Label,{children:"City"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"city",value:R,onChange:function(e){return A(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"state",children:[Object($e.jsx)(bt.a.Label,{children:"State"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"state",value:k,onChange:function(e){return w(e.target.value)}})]}),Object($e.jsx)(it.a,{style:{width:"100%"},className:"btn-sm",type:"submit",variant:"success",children:"Save Address"}),Object($e.jsx)(it.a,{style:{width:"100%"},className:"btn-sm mt-2",variant:"primary",onClick:function(){return t()},children:"Cancel"})]})})})]})};var qt=function(){var e=Object(Qe.k)(),t=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error,r=Object(s.b)(),c=Object(a.useState)(""),n=Object(ot.a)(c,2),o=n[0],d=n[1],i=Object(a.useState)(!1),l=Object(ot.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(!1),p=Object(ot.a)(b,2),O=p[0],h=p[1],x=function(){return h(!1)},m=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,f=Object(s.c)((function(e){return e.getAllAddressesOfUserReducer})),g=f.addresses,y=f.loading,v=Object(s.c)((function(e){return e.deleteUserAddressReducer})).success;Object(a.useEffect)((function(){m?(r(gt()),r(vt()),r({type:ge})):e.push("/login")}),[r,e,m,v]),m&&"Request failed with status code 401"===t&&(alert("Session expired, please login again."),r(ft()),e.push("/login"),window.location.reload()),v&&(alert("Address successfully deleted."),r({type:we}),r(vt()));var C=function(e){d(e),h(!0)},S=function(e){r(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:Ne}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.delete("/account/delete-address/".concat(e,"/"),s);case 6:o=t.sent,d=o.data,r({type:Le,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:ke,payload:t.t0.response&&t.t0.response.data.details?t.t0.response.data.details:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}(e)),x()},E=function(){j(!u)};return Object($e.jsxs)("div",{children:[Object($e.jsx)("div",{children:Object($e.jsx)($e.Fragment,{children:Object($e.jsxs)(dt.a,{show:O,onHide:x,children:[Object($e.jsx)(dt.a.Header,{closeButton:!0,children:Object($e.jsxs)(dt.a.Title,{children:[Object($e.jsx)("i",{style:{color:"#e6e600"},className:"fas fa-exclamation-triangle"})," ","Delete Confirmation"]})}),Object($e.jsxs)(dt.a.Body,{children:["Are you sure you want to delete this address"," ",Object($e.jsxs)("em",{children:['"',o.house_no,", ",o.city,", ",o.state,'"']}),"?"]}),Object($e.jsxs)(dt.a.Footer,{children:[Object($e.jsx)(it.a,{variant:"danger",onClick:function(){return S(o.id)},children:"Confirm Delete"}),Object($e.jsx)(it.a,{variant:"primary",onClick:x,children:"Cancel"})]})]})})}),y&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting addresses"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),u?Object($e.jsx)("div",{children:Object($e.jsx)(zt,{toggleCreateAddress:E})}):Object($e.jsx)("button",{className:"btn btn-sm btn-primary mb-2 button-focus-css",onClick:function(){return E()},children:"Add new address +"}),g&&!u?g.map((function(t,r){return Object($e.jsx)("div",{children:Object($e.jsxs)(ct.a,{className:"p-2 mb-2",style:{border:"1px solid",borderColor:"#C6ACE7"},children:[Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Name: "}),t.name]}),Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Phone No: "}),"+91 ",t.phone_number]}),Object($e.jsxs)("span",{children:[Object($e.jsx)("b",{children:"Address: "}),t.house_no,", near ",t.landmark,", ",t.city,", ",t.state,",",t.pin_code,Object($e.jsx)("span",{onClick:function(){return C(t)},children:Object($e.jsx)("i",{title:"delete address",className:"mt-2 fas fa-trash-alt fa-lg delete-button-css"})}),Object($e.jsx)("span",{onClick:function(){return e.push("/all-addresses/".concat(t.id,"/"))},children:Object($e.jsx)("i",{title:"edit address",className:"mt-2 mr-2 fas fa-edit fa-lg edit-button-css"})})]})]},t.id)},r)})):""]})},Xt=function(e){var t=e.match,r=Object(Qe.k)(),c=Object(s.b)(),n=Object(a.useState)(""),o=Object(ot.a)(n,2),d=o[0],i=o[1],l=Object(a.useState)(""),u=Object(ot.a)(l,2),j=u[0],b=u[1],p=Object(a.useState)(""),O=Object(ot.a)(p,2),h=O[0],x=O[1],m=Object(a.useState)(""),f=Object(ot.a)(m,2),g=f[0],y=f[1],v=Object(a.useState)(""),C=Object(ot.a)(v,2),S=C[0],E=C[1],_=Object(a.useState)(""),R=Object(ot.a)(_,2),A=R[0],N=R[1],L=Object(a.useState)(""),k=Object(ot.a)(L,2),w=k[0],D=k[1],T=Object(s.c)((function(e){return e.userLoginReducer})),I=T.userInfo,U=Object(s.c)((function(e){return e.checkTokenValidationReducer})),P=U.error,G=Object(s.c)((function(e){return e.getSingleAddressReducer})),V=G.address,F=G.error,B=Object(s.c)((function(e){return e.updateUserAddressReducer})),H=B.success;Object(a.useEffect)((function(){I?(c(gt()),c(Ct(t.params.id))):r.push("/login")}),[c,r,I,t]),I&&"Request failed with status code 401"===P&&(alert("Session expired, please login again."),c(ft()),r.push("/login"),window.location.reload());return H&&(alert("Address updated successfully."),c({type:Ae}),r.push("/all-addresses/"),c(vt())),Object($e.jsxs)("div",{children:[Object($e.jsx)("p",{className:"text-center text-info",children:Object($e.jsx)("em",{children:"Update Address"})}),F&&Object($e.jsx)("h3",{children:"Invalid Address Request"}),Object($e.jsx)(ct.a,{className:"mx-auto mb-4",style:{width:"50%",border:"1px solid",borderColor:"#C6ACE7"},children:Object($e.jsx)(ct.a.Body,{children:Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault();var r,a,n={name:d,phone_number:j,pin_code:h,house_no:g,landmark:S,city:A,state:w};c((r=t.params.id,a=n,function(){var e=Object(Me.a)(Object(Ye.a)().mark((function e(t,c){var n,s,o,d,i;return Object(Ye.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ee}),n=c(),s=n.userLoginReducer.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,Ke.a.put("/account/update-address/".concat(r,"/"),a,o);case 6:d=e.sent,i=d.data,t({type:_e,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Re,payload:e.t0.response&&e.t0.response.data.details?e.t0.response.data.details:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:"Name"}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"text",placeholder:"enter your name",defaultValue:V?V.name:"",onChange:function(e){return i(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"phoneNumber",children:[Object($e.jsx)(bt.a.Label,{children:"Phone Number"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"phone number",pattern:"[0-9]+",maxLength:"10",defaultValue:V?V.phone_number:"",onChange:function(e){return b(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"pinCode",children:[Object($e.jsx)(bt.a.Label,{children:"Pin Code"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"pin code",defaultValue:V?V.pin_code:"",pattern:"[0-9]+",maxLength:"6",onChange:function(e){return x(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"houseNumber",children:[Object($e.jsx)(bt.a.Label,{children:"House No./Address"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"house number",defaultValue:V?V.house_no:"",onChange:function(e){return y(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"landmark",children:[Object($e.jsx)(bt.a.Label,{children:"Landmark"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"landmark",defaultValue:V?V.landmark:"",onChange:function(e){return E(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"city",children:[Object($e.jsx)(bt.a.Label,{children:"City"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"city",defaultValue:V?V.city:"",onChange:function(e){return N(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"state",children:[Object($e.jsx)(bt.a.Label,{children:"State"}),Object($e.jsx)(bt.a.Control,{type:"text",placeholder:"state",defaultValue:V?V.state:"",onChange:function(e){return D(e.target.value)}})]}),Object($e.jsx)(it.a,{style:{width:"100%"},className:"btn-sm",type:"submit",variant:"success",children:"Save Changes"}),Object($e.jsx)(it.a,{style:{width:"100%"},className:"btn-sm mt-2",variant:"primary",onClick:function(){return r.push("/all-addresses/")},children:"Cancel"})]})})})]})},Qt=r(126),Yt=function(e){var t=e.slice(8,10),r=e.slice(5,7),a=e.slice(0,4);switch(r){case"01":return"".concat(t," January ").concat(a);case"02":return"".concat(t," Feburary ").concat(a);case"03":return"".concat(t," March ").concat(a);case"04":return"".concat(t," April ").concat(a);case"05":return"".concat(t," May ").concat(a);case"06":return"".concat(t," June ").concat(a);case"07":return"".concat(t," July ").concat(a);case"08":return"".concat(t," August ").concat(a);case"09":return"".concat(t," September ").concat(a);case"10":return"".concat(t," October ").concat(a);case"11":return"".concat(t," November ").concat(a);case"12":return"".concat(t," December ").concat(a);default:return null}},Mt=function(e){var t=e.handleSearchTerm,r=e.placeholderValue,c=Object(a.useState)(""),n=Object(ot.a)(c,2),s=n[0],o=n[1];return Object($e.jsx)("div",{children:Object($e.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(s)},children:Object($e.jsxs)("span",{style:{display:"flex"},className:"",children:[Object($e.jsx)("input",{type:"text",value:s,placeholder:r,className:"form-control",onChange:function(e){return o(e.target.value)}}),Object($e.jsx)("button",{type:"submit",className:"btn btn-primary ml-2 button-focus-css",children:Object($e.jsx)("i",{className:"fas fa-search"})})]})})})};var Jt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Yt((new Date).toISOString().slice(0,10)),c=Object(a.useState)(r),n=Object(ot.a)(c,1)[0],o=Object(a.useState)(0),d=Object(ot.a)(o,2),i=d[0],l=d[1],u=Object(a.useState)(""),j=Object(ot.a)(u,2),b=j[0],p=j[1],O=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,h=Object(s.c)((function(e){return e.getAllOrdersReducer})),x=h.orders,m=h.loading,f=Object(s.c)((function(e){return e.changeDeliveryStatusReducer})),g=f.success,y=f.loading,v=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error;Object(a.useEffect)((function(){O?(t(gt()),t(St())):e.push("/login")}),[O,t,e]),O&&"Request failed with status code 401"===v&&(alert("Session expired, please login again."),t(ft()),e.push("/login"),window.location.reload());var C=function(e,r){l(e),t(function(e,t){return function(){var r=Object(Me.a)(Object(Ye.a)().mark((function r(a,c){var n,s,o,d,i;return Object(Ye.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:Ue}),n=c(),s=n.userLoginReducer.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},r.next=6,Ke.a.put("/account/change-order-status/".concat(e,"/"),t,o);case 6:d=r.sent,i=d.data,a({type:Pe,payload:i}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:Ge,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()}(e,{is_delivered:r,delivered_at:r?n:"Not Delivered"}))};return g&&(alert("Delivery status changed successfully"),t({type:Ve}),t(St())),Object($e.jsxs)("div",{children:[m&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Orders"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),O.admin&&Object($e.jsx)(Mt,{handleSearchTerm:function(e){p(e)},placeholderValue:"Search orders by Customer Name, Address or by Ordered Item"}),x.length>0?Object($e.jsxs)(Qt.a,{className:"mt-2",striped:!0,bordered:!0,children:[Object($e.jsx)("thead",{children:Object($e.jsxs)("tr",{className:"p-3 bg-info text-white text-center",children:[Object($e.jsx)("th",{children:"Order Id"}),Object($e.jsx)("th",{children:"Customer Name"}),Object($e.jsx)("th",{children:"Card Used"}),Object($e.jsx)("th",{children:"Delivery Address"}),Object($e.jsx)("th",{children:"Ordered Item"}),Object($e.jsx)("th",{children:"Paid Status"}),Object($e.jsx)("th",{children:"Paid On"}),Object($e.jsx)("th",{children:"Total Amount"}),Object($e.jsx)("th",{children:"Delivered Status"}),Object($e.jsx)("th",{children:"Delivered On"}),O.admin&&Object($e.jsx)("th",{children:"Delivery Status"})]})}),x.filter((function(e){return e.name.toLowerCase().includes(b)||e.ordered_item.toLowerCase().includes(b)||e.address.toLowerCase().includes(b)})).map((function(e,t){return Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{className:"text-center",children:[Object($e.jsx)("td",{children:e.id}),Object($e.jsx)("td",{children:e.name}),Object($e.jsx)("td",{children:e.card_number}),Object($e.jsx)("td",{children:e.address}),Object($e.jsx)("td",{children:e.ordered_item}),Object($e.jsx)("td",{children:e.paid_status?Object($e.jsx)("i",{className:"fas fa-check-circle text-success"}):Object($e.jsx)("i",{className:"fas fa-times-circle text-danger"})}),Object($e.jsx)("td",{children:Yt(e.paid_at)}),Object($e.jsxs)("td",{children:[e.total_price," INR"]}),Object($e.jsx)("td",{children:e.is_delivered?Object($e.jsx)("i",{className:"fas fa-check-circle text-success"}):Object($e.jsx)("i",{className:"fas fa-times-circle text-danger"})}),Object($e.jsx)("td",{children:e.delivered_at}),O.admin&&Object($e.jsx)("td",{children:e.is_delivered?Object($e.jsx)("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return C(e.id,!1)},children:y&&i===e.id?Object($e.jsx)(tt.a,{animation:"border"}):"Mark as Undelivered"}):Object($e.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return C(e.id,!0)},children:y&&i===e.id?Object($e.jsx)(tt.a,{animation:"border"}):"Mark as delivered"})})]})},t)}))]}):Object($e.jsx)(et,{variant:"info",children:"No orders yet."})]})},Kt=function(){var e=Object(Qe.k)(),t=Object(s.b)(),r=Object(a.useState)(""),c=Object(ot.a)(r,2),n=c[0],o=c[1],d=Object(a.useState)(""),i=Object(ot.a)(d,2),l=i[0],u=i[1],j=Object(a.useState)(""),b=Object(ot.a)(j,2),p=b[0],O=b[1],h=Object(a.useState)(!1),y=Object(ot.a)(h,2),v=y[0],C=y[1],S=Object(a.useState)(null),E=Object(ot.a)(S,2),_=E[0],R=E[1],A=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,N=Object(s.c)((function(e){return e.createProductReducer})),L=N.product,k=N.success,w=N.error,D=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error;Object(a.useEffect)((function(){A||e.push("/login"),t(gt())}),[t,A,e]);return k&&(alert("Product successfully created."),e.push("/product/".concat(L.id,"/")),t({type:g})),A&&"Request failed with status code 401"===D&&(alert("Session expired, please login again."),t(ft()),e.push("/login"),window.location.reload()),Object($e.jsxs)("div",{children:[w&&Object($e.jsx)(et,{variant:"danger",children:w.image[0]}),Object($e.jsx)("span",{className:"d-flex justify-content-center text-info",children:Object($e.jsx)("em",{children:"New Product"})}),Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault();var r=new FormData;r.append("name",n),r.append("description",l),r.append("price",p),r.append("stock",v),r.append("image",_),t(function(e){return function(){var t=Object(Me.a)(Object(Ye.a)().mark((function t(r,a){var c,n,s,o,d;return Object(Ye.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:x}),c=a(),n=c.userLoginReducer.userInfo,s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n.token)}},t.next=6,Ke.a.post("/api/product-create/",e,s);case 6:o=t.sent,d=o.data,r({type:m,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:f,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}(r))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Name"})}),Object($e.jsx)(bt.a.Control,{required:!0,autoFocus:!0,type:"text",value:n,placeholder:"product name",onChange:function(e){return o(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"description",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Description"})}),Object($e.jsx)(bt.a.Control,{required:!0,type:"text",value:l,placeholder:"product description",onChange:function(e){return u(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"price",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Price"})}),Object($e.jsx)(bt.a.Control,{required:!0,type:"text",pattern:"[0-9]+(\\.[0-9]{1,2})?%?",value:p,placeholder:"199.99",step:"0.01",maxLength:"8",onChange:function(e){return O(e.target.value)}})]}),Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("label",{children:"In Stock"}),Object($e.jsx)("input",{type:"checkbox",value:v,className:"ml-2 mt-2",onChange:function(){return C(!v)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"image",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Image"})}),Object($e.jsx)(bt.a.Control,{required:!0,type:"file",onChange:function(e){return R(e.target.files[0])}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"success",className:"btn-sm button-focus-css",children:"Save Product"}),Object($e.jsx)(it.a,{type:"submit",variant:"primary",className:"btn-sm ml-2 button-focus-css",onClick:function(){return e.push("/")},children:"Cancel"})]})]})},Wt=function(e){var t=e.match,r=Object(s.c)((function(e){return e.productDetailsReducer})),c=r.loading,n=r.product,o=Object(a.useState)(""),d=Object(ot.a)(o,2),i=d[0],l=d[1],u=Object(a.useState)(""),j=Object(ot.a)(u,2),b=j[0],p=j[1],O=Object(a.useState)(""),h=Object(ot.a)(O,2),x=h[0],m=h[1],f=Object(a.useState)(n.stock),g=Object(ot.a)(f,2),E=g[0],_=g[1],R=Object(a.useState)(""),A=Object(ot.a)(R,2),N=A[0],L=A[1],k=Object(Qe.k)(),w=Object(s.b)(),D=Object(a.useState)(!1),T=Object(ot.a)(D,2),I=T[0],U=T[1],P=Object(s.c)((function(e){return e.userLoginReducer})).userInfo,G=Object(s.c)((function(e){return e.updateProductReducer})),V=G.success,F=G.loading,B=G.error,H=Object(s.c)((function(e){return e.checkTokenValidationReducer})).error;Object(a.useEffect)((function(){P&&P.admin||k.push("/login"),w(gt()),w(We(t.params.id))}),[w,P,k,t]);return V&&(alert("Product successfully updated."),w({type:S}),k.push("/product/".concat(n.id))),P&&"Request failed with status code 401"===H&&(alert("Session expired, please login again."),w(ft()),k.push("/login"),window.location.reload()),Object($e.jsxs)("div",{children:[Object($e.jsx)("span",{className:"d-flex justify-content-center text-info",children:Object($e.jsx)("em",{children:"Edit Product"})}),B?Object($e.jsxs)("div",{children:[void window.scrollTo({top:0,behavior:"smooth"}),Object($e.jsx)(et,{variant:"danger",children:B.image[0]})]}):"",c&&Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Getting Product Details"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}),F?Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("h5",{children:"Updating Product"}),Object($e.jsx)("span",{className:"ml-2",children:Object($e.jsx)(tt.a,{animation:"border"})})]}):"",Object($e.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault();var t=n.id,r=new FormData;r.append("name",i),r.append("description",b),r.append("price",x),r.append("stock",E),r.append("image",N),w(function(e,t){return function(){var r=Object(Me.a)(Object(Ye.a)().mark((function r(a,c){var n,s,o,d,i;return Object(Ye.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:y}),n=c(),s=n.userLoginReducer.userInfo,o={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s.token)}},r.next=6,Ke.a.put("/api/product-update/".concat(e,"/"),t,o);case 6:d=r.sent,i=d.data,a({type:v,payload:i}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:C,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()}(t,r))},children:[Object($e.jsxs)(bt.a.Group,{controlId:"image",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Image"})}),Object($e.jsx)("p",{children:Object($e.jsx)("img",{src:n.image,alt:n.name,height:"200"})}),I?Object($e.jsxs)("div",{children:[Object($e.jsx)(bt.a.Control,{type:"file",onChange:function(e){return L(e.target.files[0])}}),Object($e.jsx)("span",{onClick:function(){U(!I),L(""),w({type:S})},className:"btn btn-primary btn-sm mt-2",children:"Cancel"})]}):Object($e.jsx)("p",{children:Object($e.jsx)("span",{onClick:function(){return U(!I)},className:"btn btn-success btn-sm",children:"choose different image"})})]}),Object($e.jsxs)(bt.a.Group,{controlId:"name",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Name"})}),Object($e.jsx)(bt.a.Control,{autoFocus:!0,type:"text",defaultValue:n.name,placeholder:"product name",onChange:function(e){return l(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"description",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Product Description"})}),Object($e.jsx)(bt.a.Control,{type:"text",defaultValue:n.description,placeholder:"product description",onChange:function(e){return p(e.target.value)}})]}),Object($e.jsxs)(bt.a.Group,{controlId:"price",children:[Object($e.jsx)(bt.a.Label,{children:Object($e.jsx)("b",{children:"Price"})}),Object($e.jsx)(bt.a.Control,{type:"text",pattern:"[0-9]+(\\.[0-9]{1,2})?%?",defaultValue:n.price,placeholder:"199.99",step:"0.01",maxLength:"8",onChange:function(e){return m(e.target.value)}})]}),Object($e.jsxs)("span",{style:{display:"flex"},children:[Object($e.jsx)("label",{children:"In Stock"}),Object($e.jsx)("input",{type:"checkbox",defaultChecked:n.stock,className:"ml-2 mt-2",onChange:function(){return _(!E)}})]}),Object($e.jsx)(it.a,{type:"submit",variant:"success",className:"btn-sm button-focus-css mb-4",children:"Save Changes"}),Object($e.jsx)(it.a,{onClick:function(){return k.push("/product/".concat(n.id))},variant:"primary",className:"btn-sm ml-2 button-focus-css mb-4",children:"Cancel"})]})]})};var Zt=function(){return Object($e.jsx)("div",{children:Object($e.jsx)(et,{variant:"danger",children:"404 Not Found"})})},$t=r(79),er=r.n($t),tr=function(){return Object($e.jsxs)("div",{children:[Object($e.jsxs)(Xe.BrowserRouter,{children:[Object($e.jsx)(Dt,{}),Object($e.jsx)("div",{className:"container mt-4",children:Object($e.jsxs)(Qe.g,{children:[Object($e.jsx)(Qe.d,{path:"/",component:st,exact:!0}),Object($e.jsx)(Qe.d,{path:"/new-product/",component:Kt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/product/:id/",component:ut,exact:!0}),Object($e.jsx)(Qe.d,{path:"/product-update/:id/",component:Wt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/product/:id/checkout/",component:Rt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/payment-status",component:Tt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/login",component:It,exact:!0}),Object($e.jsx)(Qe.d,{path:"/register",component:Ut,exact:!0}),Object($e.jsx)(Qe.d,{path:"/account",component:Vt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/account/update/",component:Ft,exact:!0}),Object($e.jsx)(Qe.d,{path:"/account/delete/",component:Bt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/stripe-card-details",component:Gt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/stripe-card-update",component:Pt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/all-addresses/",component:qt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/all-addresses/:id/",component:Xt,exact:!0}),Object($e.jsx)(Qe.d,{path:"/all-orders/",component:Jt,exact:!0}),Object($e.jsx)(Qe.d,{path:"",component:Zt,exact:!0})]})})]}),Object($e.jsx)(er.a,{pageId:"110111535413312",appId:"1411681669687745"}),","]})};r(114);n.a.render(Object($e.jsx)(s.a,{store:qe,children:Object($e.jsx)(tr,{})}),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.befa4730.chunk.js.map